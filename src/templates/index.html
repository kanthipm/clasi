<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ... styles and setup ... -->
</head>
<body>
  <div class="header">
    <h1>CLASI</h1>
  </div>
  <div class="container">
    <form id="courseForm">
      <!-- Subject Dropdown -->
      <div>
        <label for="subject">Select Subject:</label>
        <select id="subject" name="subject">
          <option value="">-- Choose a Subject --</option>
          {% for subj in subjects %}
            <option value="{{ subj }}">{{ subj }}</option>
          {% endfor %}
        </select>
      </div>
      <!-- AOK, MOI, Professor, etc. -->
      <!-- ... same as your current HTML ... -->
      <div>
        <button type="submit">Fetch Courses</button>
      </div>
    </form>
    <div id="results"></div>
  </div>
  
  <script>
    document.getElementById('courseForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      var subject = document.getElementById('subject').value;
      var aok = document.getElementById('aok').value;
      var moi = document.getElementById('moi').value;
      var professor = document.getElementById('professor').value;
      
      // Build the query string
      var queryParams = [];
      if (subject) queryParams.push("subject=" + encodeURIComponent(subject));
      if (aok) queryParams.push("aok=" + encodeURIComponent(aok));
      if (moi) queryParams.push("moi=" + encodeURIComponent(moi));
      if (professor) queryParams.push("professor=" + encodeURIComponent(professor));
      
      var queryString = queryParams.join("&");
      
      fetch("/courses?" + queryString)
        .then(response => response.json())
        .then(data => {
          var resultsDiv = document.getElementById('results');
          resultsDiv.innerHTML = "";
          if (data.error) {
            resultsDiv.innerHTML = '<p>Error: ' + data.error + '</p>';
          } else {
            resultsDiv.innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
          }
        })
        .catch(err => {
          console.error(err);
          alert("Error fetching courses.");
        });
    });
  </script>
</body>
</html>
